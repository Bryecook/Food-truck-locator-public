{"ast":null,"code":"var _jsxFileName = \"D:\\\\Coding\\\\Phase-5-Project\\\\food-truck-frontend\\\\src\\\\App.js\";\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Map from './Components/FrontMap.js';\nimport MainPage from './Containers/MainPage';\nimport React from 'react';\nimport FrontPage from './Containers/FrontPage';\nimport { BrowserRouter as Router, Switch, Route, Link, BrowserRouter, Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      trucksArray: [],\n      currentEater: {}\n    };\n\n    this.favorite = truck => {\n      let eater = this.state.currentEater;\n      eater.trucks = [...eater.trucks, truck];\n      this.setState({\n        currentEater: eater\n      });\n      console.log(this.state.currentEater.trucks);\n      this.getTrucks();\n      let newFavorite = {\n        eater_id: this.state.currentEater.id,\n        truck_id: truck.id\n      };\n      let reqPackage = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify(newFavorite)\n      };\n      fetch('http://localhost:3000/api/v1/favorites', reqPackage).then(res => res.json()).then(data => this.updateFavorites(data));\n    };\n\n    this.updateFavorites = data => {// this.setState({\n      //   currentEaterFavorites: [...this.state.currentEaterFavorites, data]\n      // })\n      // console.log(this.state.currentEaterFavorites)\n    };\n\n    this.setUser = data => {\n      let obj = JSON.parse(data);\n      this.setState({\n        currentEater: obj\n      });\n      console.log(this.state.currentEater, this.state.currentEaterFavorites);\n    };\n\n    this.setTrucks = data => {\n      this.setState({\n        trucksArray: data\n      });\n      console.log(this.state.trucksArray);\n    };\n\n    this.getTrucks = () => {\n      fetch('http://localhost:3000/api/v1/trucks', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'Authorization': `Bearer ${localStorage.token}`\n        }\n      }).then(res => res.json()).then(data => this.setTrucks(data));\n    };\n\n    this.handleLogIn = e => {\n      console.log('login hit');\n      e.preventDefault();\n      let eater = {\n        username: e.target[0].value,\n        password: e.target[1].value\n      };\n      let reqPackage = {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"\"\n        },\n        body: JSON.stringify(eater)\n      };\n      fetch('http://localhost:3000/api/v1/login', reqPackage).then(res => res.json()).then(data => {\n        console.log(data);\n        localStorage.token = data.token;\n        this.setUser(data.eater); // this.getTrucks()\n      });\n    };\n\n    this.logout = () => {\n      localStorage.clear();\n      window.location.reload();\n    };\n\n    this.addEater = newEater => {\n      console.log(newEater);\n      let reqPackage = {\n        method: 'POST',\n        header: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\",\n          'Authorization': `Bearer ${localStorage.token}`\n        },\n        body: JSON.stringify(newEater)\n      };\n      fetch('http://localhost:3000/api/v1/eaters', reqPackage).then(res => res.json()).then(data => console.log(data));\n    };\n  }\n\n  componentDidMount() {\n    console.log('mounted');\n    this.getTrucks();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: [localStorage.token ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.logout(),\n        children: \"Log Out \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 26\n      }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 82\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          children: localStorage.token ? /*#__PURE__*/_jsxDEV(Redirect, {\n            to: \"/welcome\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(MainPage, {\n            handleLogIn: this.handleLogIn,\n            addEater: this.addEater\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 57\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/welcome\",\n          children: localStorage.token ? /*#__PURE__*/_jsxDEV(FrontPage, {\n            trucks: this.state.trucksArray,\n            eater: this.state.currentEater,\n            favorite: this.favorite\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n            to: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 133\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 5\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:/Coding/Phase-5-Project/food-truck-frontend/src/App.js"],"names":["Map","MainPage","React","FrontPage","BrowserRouter","Router","Switch","Route","Link","Redirect","App","Component","state","trucksArray","currentEater","favorite","truck","eater","trucks","setState","console","log","getTrucks","newFavorite","eater_id","id","truck_id","reqPackage","method","headers","body","JSON","stringify","fetch","then","res","json","data","updateFavorites","setUser","obj","parse","currentEaterFavorites","setTrucks","localStorage","token","handleLogIn","e","preventDefault","username","target","value","password","logout","clear","window","location","reload","addEater","newEater","header","componentDidMount","render"],"mappings":"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","sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport Map from './Components/FrontMap.js';\nimport MainPage from './Containers/MainPage'\nimport React from 'react';\nimport FrontPage from './Containers/FrontPage'\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  BrowserRouter,\n  Redirect\n} from \"react-router-dom\";\n\n\nclass App extends React.Component {\n\nstate = {\n  trucksArray: [],\n  currentEater: {},\n}\n\n\ncomponentDidMount() {\n  console.log('mounted')\n  this.getTrucks()\n}\n\nfavorite = (truck) => {\n  let eater = this.state.currentEater\n  eater.trucks = [...eater.trucks, truck]\n  this.setState({\n    currentEater: eater\n  })\n  console.log(this.state.currentEater.trucks)\n  this.getTrucks()\n  let newFavorite = {\n    eater_id: this.state.currentEater.id,\n    truck_id: truck.id\n  }\n  let reqPackage = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json'\n    },\n    body: JSON.stringify(newFavorite)\n  }\n  fetch('http://localhost:3000/api/v1/favorites', reqPackage)\n  .then(res => res.json())\n  .then(data => this.updateFavorites(data))\n}\n\nupdateFavorites = (data) =>{\n// this.setState({\n//   currentEaterFavorites: [...this.state.currentEaterFavorites, data]\n// })\n// console.log(this.state.currentEaterFavorites)\n}\nsetUser = (data) => {\n  let obj = JSON.parse(data)\n  this.setState({\n    currentEater: obj,\n  })\n  console.log(this.state.currentEater, this.state.currentEaterFavorites)\n}\n\nsetTrucks = (data) => {\n  this.setState({\n    trucksArray: data\n  })\n  console.log(this.state.trucksArray)\n}\ngetTrucks = () => {\n  fetch('http://localhost:3000/api/v1/trucks', {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n      'Authorization': `Bearer ${localStorage.token}`\n    }\n  })\n  .then(res => res.json())\n  .then(data => this.setTrucks(data))\n}\n\n\n\nhandleLogIn = (e) => {\n  console.log('login hit')\n  e.preventDefault()\n  let eater = {\n    username: e.target[0].value,\n    password: e.target[1].value\n  }\n\n  let reqPackage = {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept\": \"application/json\",\n      \"Access-Control-Allow-Origin\": \"\",\n    },\n    body: JSON.stringify(eater)\n  }\n\n  fetch('http://localhost:3000/api/v1/login', reqPackage)\n  .then(res => res.json())\n  .then(data => {\n    console.log(data)\n    localStorage.token = data.token\n    this.setUser(data.eater)\n    // this.getTrucks()\n  })\n}\n\nlogout = () => {\n  localStorage.clear()\n  window.location.reload()\n}\n\naddEater = (newEater) => {\n  console.log(newEater)\n  let reqPackage = {\n    method: 'POST',\n    header: {\n      \"Content-Type\": \"application/json\",\n      \"Accept\": \"application/json\",\n      'Authorization': `Bearer ${localStorage.token}`\n    },\n    body: JSON.stringify(newEater)\n  }\n  fetch('http://localhost:3000/api/v1/eaters', reqPackage)\n  .then(res => res.json())\n  .then(data => console.log(data))\n}\n\n  render() {\n  return (\n    <BrowserRouter>\n   {localStorage.token ? <button onClick={() =>this.logout()}>Log Out </button>: <h1>Login</h1>}\n    <Switch>\n      <Route exact path=\"/\">\n      {localStorage.token ? <Redirect to=\"/welcome\"/> : <MainPage handleLogIn={this.handleLogIn} addEater={this.addEater}/>}\n      </Route>\n      <Route exact path='/welcome'>\n      {localStorage.token ? <FrontPage trucks={this.state.trucksArray} eater={this.state.currentEater} favorite={this.favorite}/> : <Redirect to=\"/\"/>}\n      </Route>\n    </Switch>\n    \n    </BrowserRouter>\n  );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}